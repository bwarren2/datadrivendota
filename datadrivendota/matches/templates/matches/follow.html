{% extends "matches/base.html" %}
{% block title %}Match Index{% endblock title %}
{% block page_title %}Matches Index {% endblock page_title %}

{% block content %}
{% if match_data %}
<div class="container">
  <div class="row">
    <div class='col-md-8'>
      {% include "matches/_match_list.html" %}
    </div>
    <div class='col-md-4'>
      <div>
        <h4>Score Toggles</h4>
        <div class='row'>
          <div class='col-md-6'>
            <button id='show-score' type="button" class="btn btn-primary btn-lg btn-block">Show Scores</button>
          </div>
          <div class='col-md-6'>
            <button id='hide-score' type="button" class="btn btn-primary btn-lg btn-block">Hide Scores</button>
          </div>
        </div>
        <br>
        <div class='row'>
          <div class='col-md-6'>
            <button id='score-format-raw' type="button" class="btn btn-primary btn-lg btn-block">K/D/A</button>
          </div>
          <div class='col-md-6'>
            <button id='score-format-kda2' type="button" class="btn btn-primary btn-lg btn-block">K-D+A/2</button>
          </div>
        </div>
      </div>
      <h4>Match Filtration</h4>
      <div class='form-container'>
        <form class='chart-form' action="" method='POST'>
          {% include "_form.html" %}
          {% csrf_token %}
          <div class="control-group">
            <div class="controls pull-right">
              <button type="submit" class="btn btn-small btn-primary">Submit</button>
            </div>
          </div>
          <div class="clearfix"></div>
        </form>
      </div>

    </div>
  </div>
</div>

{% include "_pagination.html" with pages_list=match_list page_links_to_display=match_list.paginator.page_range_with_ellipses %}

{% else %}
  <p>
  You do not seem to have any feeds active.  Add players to follow in the
  <a href="{% url 'accounts:management' %}">management panel</a> to track
  new games here!
  </p>
{% endif %}
{% endblock content %}

{% block extra_js %}
<script type="text/javascript">
function playerImage() {
  $('img[data-player-image]').fadeOut('fast', function() {
    $(this).attr('src', $(this).attr('data-player-image'));
    $(this).fadeIn('fast');
  });
}

function heroImage() {
  $('img[data-player-image]').fadeOut('fast', function() {
    $(this).attr('src', $(this).attr('data-hero-image'));
    $(this).fadeIn('fast');
  });
}

function raw_score() {
  $('div.scorebar').fadeOut('fast', function() {
    $(this).html($(this).attr('data-raw-score'));
    $(this).fadeIn('fast');
  });
}

function kda2_score() {
  $('div.scorebar').fadeOut('fast', function() {
    $(this).html($(this).attr('data-kda2'));
    $(this).fadeIn('fast');
  });
}


$(document).ready(function() {
  $('#score-format-raw').click(raw_score);
  $('#score-format-kda2').click(kda2_score);
  window.jsUtils.scorebarToggles();
});
</script>
{% endblock extra_js %}
