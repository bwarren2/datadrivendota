"use strict";
$(function(){
  // This file is necessary because the splitting of replays does not include subsources appropriately, ex beastmaster boar killing a rax
  // The other reason is the remarking glitch: showing the same messages two different ways currently has a collision in the map fn.

    var bldg_tooltip = function(d, x, y, z){
          if (d === null) {return "";}
          d = d.point;
          var table = d3.select(document.createElement("table"));

          var clean = function(str){
            if (str.slice(0,12)=="npc_dota_bad") {
                return str.replace("\_"," ").slice(17,99);
            } else {
                return str.replace("\_"," ").slice(18,99);
            }
          }

          // Make a body
          var tbodyEnter = table
              .selectAll("tbody")
              .data([d])
              .enter()
              .append("tbody");

          var trowEnter1 = tbodyEnter
              .append("tr");

          trowEnter1
              .append("td")
              .html("Bldg: ");

          trowEnter1.append("td")
              .classed("value", true)
              .html(function(x){
                return clean(x.key);
            });

          var trowEnter2 = tbodyEnter
              .append("tr");

          trowEnter2
              .append("td")
              .html("Time: ");

          trowEnter2.append("td")
              .classed("value", true)
              .html(function(x){return String(x.offset_time).toHHMMSS()});

          var trowEnter3 = tbodyEnter
              .append("tr");

          trowEnter3
              .append("td")
              .html("Killer: ");

          trowEnter3.append("td")
              .classed("value", true)
              .html(function(x){return x.unit.replace('npc_dota_hero_','').replace("_"," ");});


          var html = table.node().outerHTML;
          return html;

    };

    var match_data = [{"key":"Match #1906861533","values":[{"offset_time":416,"sum":0,"series":0},{"target_illusion":false,"offset_time":416,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":1205,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_rubick","sum":1,"series":0},{"target_illusion":false,"offset_time":502,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":1291,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":2,"series":0},{"target_illusion":false,"offset_time":569,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":1358,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":3,"series":0},{"target_illusion":false,"offset_time":612,"target_hero":true,"key":"npc_dota_hero_bane","time":1401,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":4,"series":0},{"target_illusion":false,"offset_time":624,"target_hero":true,"key":"npc_dota_hero_alchemist","time":1413,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_beastmaster","sum":5,"series":0},{"target_illusion":false,"offset_time":637,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":1426,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":6,"series":0},{"target_illusion":false,"offset_time":642,"target_hero":true,"key":"npc_dota_hero_rubick","time":1431,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_nevermore","sum":7,"series":0},{"target_illusion":false,"offset_time":646,"target_hero":true,"key":"npc_dota_hero_undying","time":1435,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":8,"series":0},{"target_illusion":false,"offset_time":798,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":1587,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":9,"series":0},{"target_illusion":false,"offset_time":909,"target_hero":true,"key":"npc_dota_hero_alchemist","time":1698,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_nevermore","sum":10,"series":0},{"target_illusion":false,"offset_time":911,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":1700,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_bane","sum":11,"series":0},{"target_illusion":false,"offset_time":994,"target_hero":true,"key":"npc_dota_hero_bane","time":1783,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_juggernaut","sum":12,"series":0},{"target_illusion":false,"offset_time":999,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":1788,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":13,"series":0},{"target_illusion":false,"offset_time":1010,"target_hero":true,"key":"npc_dota_hero_rubick","time":1799,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":14,"series":0},{"target_illusion":false,"offset_time":1392,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2181,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":15,"series":0},{"target_illusion":false,"offset_time":1403,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2192,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_juggernaut","sum":16,"series":0},{"target_illusion":false,"offset_time":1561,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":2350,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_nevermore","sum":17,"series":0},{"target_illusion":false,"offset_time":1565,"target_hero":true,"key":"npc_dota_hero_rubick","time":2354,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":18,"series":0},{"target_illusion":false,"offset_time":1726,"target_hero":true,"key":"npc_dota_hero_rubick","time":2515,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":19,"series":0},{"target_illusion":false,"offset_time":1734,"target_hero":true,"key":"npc_dota_hero_bane","time":2523,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":20,"series":0},{"target_illusion":false,"offset_time":1737,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":2526,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":21,"series":0},{"target_illusion":false,"offset_time":1743,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2532,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":22,"series":0},{"target_illusion":false,"offset_time":1874,"target_hero":true,"key":"npc_dota_hero_undying","time":2663,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":23,"series":0},{"target_illusion":false,"offset_time":1882,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2671,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_alchemist","sum":24,"series":0},{"target_illusion":false,"offset_time":1891,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2680,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":25,"series":0},{"target_illusion":false,"offset_time":1893,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":2682,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":26,"series":0},{"target_illusion":false,"offset_time":1897,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":2686,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_rubick","sum":27,"series":0},{"target_illusion":false,"offset_time":1900,"target_hero":true,"key":"npc_dota_hero_rubick","time":2689,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":28,"series":0},{"target_illusion":false,"offset_time":1919,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2708,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_alchemist","sum":29,"series":0},{"target_illusion":false,"offset_time":1941,"target_hero":true,"key":"npc_dota_hero_bane","time":2730,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":30,"series":0},{"target_illusion":false,"offset_time":1953,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":2742,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_alchemist","sum":31,"series":0},{"target_illusion":false,"offset_time":1988,"target_hero":true,"key":"npc_dota_hero_rubick","time":2777,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":32,"series":0},{"target_illusion":false,"offset_time":2027,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2816,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":33,"series":0},{"target_illusion":false,"offset_time":2027,"target_hero":true,"key":"npc_dota_hero_bane","time":2816,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":34,"series":0},{"target_illusion":false,"offset_time":2039,"target_hero":true,"key":"npc_dota_hero_alchemist","time":2828,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":35,"series":0},{"target_illusion":false,"offset_time":2046,"target_hero":true,"key":"npc_dota_hero_undying","time":2835,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":36,"series":0},{"target_illusion":false,"offset_time":2237,"target_hero":true,"key":"npc_dota_hero_rubick","time":3026,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_bane","sum":37,"series":0},{"target_illusion":false,"offset_time":2248,"target_hero":true,"key":"npc_dota_hero_undying","time":3037,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":38,"series":0},{"target_illusion":false,"offset_time":2376,"target_hero":true,"key":"npc_dota_hero_rubick","time":3165,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_earthshaker","sum":39,"series":0},{"target_illusion":false,"offset_time":2378,"target_hero":true,"key":"npc_dota_hero_undying","time":3167,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":40,"series":0},{"target_illusion":false,"offset_time":2379,"target_hero":true,"key":"npc_dota_hero_alchemist","time":3168,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":41,"series":0},{"target_illusion":false,"offset_time":2391,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3180,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":42,"series":0},{"target_illusion":false,"offset_time":2455,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3244,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":43,"series":0},{"target_illusion":false,"offset_time":2678,"target_hero":true,"key":"npc_dota_hero_undying","time":3467,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":44,"series":0},{"target_illusion":false,"offset_time":2778,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3567,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":45,"series":0},{"target_illusion":false,"offset_time":2796,"target_hero":true,"key":"npc_dota_hero_alchemist","time":3585,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_nevermore","sum":46,"series":0},{"target_illusion":false,"offset_time":2831,"target_hero":true,"key":"npc_dota_hero_rubick","time":3620,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_earthshaker","sum":47,"series":0},{"target_illusion":false,"offset_time":2837,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3626,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_undying","sum":48,"series":0},{"target_illusion":false,"offset_time":2854,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":3643,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_alchemist","sum":49,"series":0},{"target_illusion":false,"offset_time":2856,"target_hero":true,"key":"npc_dota_hero_bane","time":3645,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":50,"series":0},{"target_illusion":false,"offset_time":2866,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":3655,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_undying","sum":51,"series":0},{"target_illusion":false,"offset_time":3030,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3819,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":52,"series":0},{"target_illusion":false,"offset_time":3033,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3822,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":53,"series":0},{"target_illusion":false,"offset_time":3037,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3826,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_rubick","sum":54,"series":0},{"target_illusion":false,"offset_time":3050,"target_hero":true,"key":"npc_dota_hero_rubick","time":3839,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_nevermore","sum":55,"series":0},{"target_illusion":false,"offset_time":3051,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":3840,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":56,"series":0},{"target_illusion":false,"offset_time":3058,"target_hero":true,"key":"npc_dota_hero_undying","time":3847,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":57,"series":0},{"target_illusion":false,"offset_time":3107,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":3896,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":58,"series":0},{"target_illusion":false,"offset_time":3110,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":3899,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_juggernaut","sum":59,"series":0},{"target_illusion":false,"offset_time":3113,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3902,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":60,"series":0},{"target_illusion":false,"offset_time":3117,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3906,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_undying","sum":61,"series":0},{"target_illusion":false,"offset_time":3162,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3951,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_alchemist","sum":62,"series":0},{"offset_time":3162,"sum":62,"series":0}]}];

    var side_data = [{"key":"Radiant","values":[{"offset_time":416,"sum":0,"series":0},{"target_illusion":false,"offset_time":416,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":1205,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_rubick","sum":1,"series":0},{"target_illusion":false,"offset_time":569,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":1358,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":2,"series":0},{"target_illusion":false,"offset_time":612,"target_hero":true,"key":"npc_dota_hero_bane","time":1401,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":3,"series":0},{"target_illusion":false,"offset_time":624,"target_hero":true,"key":"npc_dota_hero_alchemist","time":1413,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_beastmaster","sum":4,"series":0},{"target_illusion":false,"offset_time":637,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":1426,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":5,"series":0},{"target_illusion":false,"offset_time":798,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":1587,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":6,"series":0},{"target_illusion":false,"offset_time":994,"target_hero":true,"key":"npc_dota_hero_bane","time":1783,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_juggernaut","sum":7,"series":0},{"target_illusion":false,"offset_time":1403,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2192,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_juggernaut","sum":8,"series":0},{"target_illusion":false,"offset_time":1734,"target_hero":true,"key":"npc_dota_hero_bane","time":2523,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":9,"series":0},{"target_illusion":false,"offset_time":1882,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2671,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_alchemist","sum":10,"series":0},{"target_illusion":false,"offset_time":1893,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":2682,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":11,"series":0},{"target_illusion":false,"offset_time":1897,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":2686,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_rubick","sum":12,"series":0},{"target_illusion":false,"offset_time":1919,"target_hero":true,"key":"npc_dota_hero_nevermore","time":2708,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_alchemist","sum":13,"series":0},{"target_illusion":false,"offset_time":1941,"target_hero":true,"key":"npc_dota_hero_bane","time":2730,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":14,"series":0},{"target_illusion":false,"offset_time":1953,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":2742,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_alchemist","sum":15,"series":0},{"target_illusion":false,"offset_time":2027,"target_hero":true,"key":"npc_dota_hero_bane","time":2816,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":16,"series":0},{"target_illusion":false,"offset_time":2455,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3244,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":17,"series":0},{"target_illusion":false,"offset_time":2837,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3626,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_undying","sum":18,"series":0},{"target_illusion":false,"offset_time":2854,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":3643,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_alchemist","sum":19,"series":0},{"target_illusion":false,"offset_time":2856,"target_hero":true,"key":"npc_dota_hero_bane","time":3645,"target_source":"npc_dota_hero_bane","type":"kills","unit":"npc_dota_hero_alchemist","sum":20,"series":0},{"target_illusion":false,"offset_time":2866,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":3655,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_undying","sum":21,"series":0},{"target_illusion":false,"offset_time":3033,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3822,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_juggernaut","sum":22,"series":0},{"target_illusion":false,"offset_time":3037,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3826,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_rubick","sum":23,"series":0},{"target_illusion":false,"offset_time":3107,"target_hero":true,"key":"npc_dota_hero_earthshaker","time":3896,"target_source":"npc_dota_hero_earthshaker","type":"kills","unit":"npc_dota_hero_juggernaut","sum":24,"series":0},{"target_illusion":false,"offset_time":3110,"target_hero":true,"key":"npc_dota_hero_ancient_apparition","time":3899,"target_source":"npc_dota_hero_ancient_apparition","type":"kills","unit":"npc_dota_hero_juggernaut","sum":25,"series":0},{"target_illusion":false,"offset_time":3117,"target_hero":true,"key":"npc_dota_hero_nevermore","time":3906,"target_source":"npc_dota_hero_nevermore","type":"kills","unit":"npc_dota_hero_undying","sum":26,"series":0},{"target_illusion":false,"offset_time":3162,"target_hero":true,"key":"npc_dota_hero_doom_bringer","time":3951,"target_source":"npc_dota_hero_doom_bringer","type":"kills","unit":"npc_dota_hero_alchemist","sum":27,"series":0},{"offset_time":3162,"sum":27,"series":0}]},{"key":"Dire","values":[{"offset_time":416,"sum":0,"series":1},{"target_illusion":false,"offset_time":502,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":1291,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":1,"series":1},{"target_illusion":false,"offset_time":642,"target_hero":true,"key":"npc_dota_hero_rubick","time":1431,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_nevermore","sum":2,"series":1},{"target_illusion":false,"offset_time":646,"target_hero":true,"key":"npc_dota_hero_undying","time":1435,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":3,"series":1},{"target_illusion":false,"offset_time":909,"target_hero":true,"key":"npc_dota_hero_alchemist","time":1698,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_nevermore","sum":4,"series":1},{"target_illusion":false,"offset_time":911,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":1700,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_bane","sum":5,"series":1},{"target_illusion":false,"offset_time":999,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":1788,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":6,"series":1},{"target_illusion":false,"offset_time":1010,"target_hero":true,"key":"npc_dota_hero_rubick","time":1799,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":7,"series":1},{"target_illusion":false,"offset_time":1392,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2181,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":8,"series":1},{"target_illusion":false,"offset_time":1561,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":2350,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_nevermore","sum":9,"series":1},{"target_illusion":false,"offset_time":1565,"target_hero":true,"key":"npc_dota_hero_rubick","time":2354,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":10,"series":1},{"target_illusion":false,"offset_time":1726,"target_hero":true,"key":"npc_dota_hero_rubick","time":2515,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":11,"series":1},{"target_illusion":false,"offset_time":1737,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":2526,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":12,"series":1},{"target_illusion":false,"offset_time":1743,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2532,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":13,"series":1},{"target_illusion":false,"offset_time":1874,"target_hero":true,"key":"npc_dota_hero_undying","time":2663,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":14,"series":1},{"target_illusion":false,"offset_time":1891,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2680,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":15,"series":1},{"target_illusion":false,"offset_time":1900,"target_hero":true,"key":"npc_dota_hero_rubick","time":2689,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_ancient_apparition","sum":16,"series":1},{"target_illusion":false,"offset_time":1988,"target_hero":true,"key":"npc_dota_hero_rubick","time":2777,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":17,"series":1},{"target_illusion":false,"offset_time":2027,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":2816,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":18,"series":1},{"target_illusion":false,"offset_time":2039,"target_hero":true,"key":"npc_dota_hero_alchemist","time":2828,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":19,"series":1},{"target_illusion":false,"offset_time":2046,"target_hero":true,"key":"npc_dota_hero_undying","time":2835,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":20,"series":1},{"target_illusion":false,"offset_time":2237,"target_hero":true,"key":"npc_dota_hero_rubick","time":3026,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_bane","sum":21,"series":1},{"target_illusion":false,"offset_time":2248,"target_hero":true,"key":"npc_dota_hero_undying","time":3037,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":22,"series":1},{"target_illusion":false,"offset_time":2376,"target_hero":true,"key":"npc_dota_hero_rubick","time":3165,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_earthshaker","sum":23,"series":1},{"target_illusion":false,"offset_time":2378,"target_hero":true,"key":"npc_dota_hero_undying","time":3167,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":24,"series":1},{"target_illusion":false,"offset_time":2379,"target_hero":true,"key":"npc_dota_hero_alchemist","time":3168,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":25,"series":1},{"target_illusion":false,"offset_time":2391,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3180,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":26,"series":1},{"target_illusion":false,"offset_time":2678,"target_hero":true,"key":"npc_dota_hero_undying","time":3467,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":27,"series":1},{"target_illusion":false,"offset_time":2778,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3567,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":28,"series":1},{"target_illusion":false,"offset_time":2796,"target_hero":true,"key":"npc_dota_hero_alchemist","time":3585,"target_source":"npc_dota_hero_alchemist","type":"kills","unit":"npc_dota_hero_nevermore","sum":29,"series":1},{"target_illusion":false,"offset_time":2831,"target_hero":true,"key":"npc_dota_hero_rubick","time":3620,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_earthshaker","sum":30,"series":1},{"target_illusion":false,"offset_time":3030,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3819,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":31,"series":1},{"target_illusion":false,"offset_time":3050,"target_hero":true,"key":"npc_dota_hero_rubick","time":3839,"target_source":"npc_dota_hero_rubick","type":"kills","unit":"npc_dota_hero_nevermore","sum":32,"series":1},{"target_illusion":false,"offset_time":3051,"target_hero":true,"key":"npc_dota_hero_juggernaut","time":3840,"target_source":"npc_dota_hero_juggernaut","type":"kills","unit":"npc_dota_hero_doom_bringer","sum":33,"series":1},{"target_illusion":false,"offset_time":3058,"target_hero":true,"key":"npc_dota_hero_undying","time":3847,"target_source":"npc_dota_hero_undying","type":"kills","unit":"npc_dota_hero_nevermore","sum":34,"series":1},{"target_illusion":false,"offset_time":3113,"target_hero":true,"key":"npc_dota_hero_beastmaster","time":3902,"target_source":"npc_dota_hero_beastmaster","type":"kills","unit":"npc_dota_hero_nevermore","sum":35,"series":1},{"offset_time":3162,"sum":35,"series":1}]}];


    d7.extensions.charts.pms_shards.render_data(
      "#side_kills",
      side_data,
      d7.extensions.components.axes.offset_time,
      d7.extensions.components.axes.sum,
      {height:235, width:212, forceX:[-120, 3172]}
    );


    d7.extensions.charts.pms_shards.render_data(
      "#total_kills",
      match_data,
      d7.extensions.components.axes.offset_time,
      d7.extensions.components.axes.sum,
      {height:235, width:212, forceX:[-120, 3172]}
    );

    var radiant_building_kills = [{"target_illusion": false, "target_hero": false, "key": "nothing", "time": 669, "target_source": "none", "type": "kills", "unit": "none"},{"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower1_mid", "time": 1490, "target_source": "npc_dota_goodguys_tower1_mid", "type": "kills", "unit": "npc_dota_hero_undying"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower1_bot", "time": 1629, "target_source": "npc_dota_goodguys_tower1_bot", "type": "kills", "unit": "npc_dota_hero_nevermore"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower1_top", "time": 1865, "target_source": "npc_dota_goodguys_tower1_top", "type": "kills", "unit": "npc_dota_hero_nevermore"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower2_bot", "time": 3010, "target_source": "npc_dota_goodguys_tower2_bot", "type": "kills", "unit": "npc_dota_hero_nevermore"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower2_mid", "time": 3465, "target_source": "npc_dota_goodguys_tower2_mid", "type": "kills", "unit": "npc_dota_hero_nevermore"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower3_mid", "time": 3869, "target_source": "npc_dota_goodguys_tower3_mid", "type": "kills", "unit": "npc_dota_hero_ancient_apparition"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_melee_rax_mid", "time": 3876, "target_source": "npc_dota_goodguys_melee_rax_mid", "type": "kills", "unit": "npc_dota_hero_doom_bringer"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_range_rax_mid", "time": 3880, "target_source": "npc_dota_goodguys_range_rax_mid", "type": "kills", "unit": "npc_dota_hero_ancient_apparition"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_goodguys_tower3_bot", "time": 3886, "target_source": "npc_dota_goodguys_tower3_bot", "type": "kills", "unit": "npc_dota_hero_doom_bringer"}];

    var dire_building_kills = [{"target_illusion": false, "target_hero": false, "key": "nothing", "time": 669, "target_source": "none", "type": "kills", "unit": "none"},{"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower1_top", "time": 1607, "target_source": "npc_dota_badguys_tower1_top", "type": "kills", "unit": "npc_dota_hero_juggernaut"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower1_bot", "time": 2263, "target_source": "npc_dota_badguys_tower1_bot", "type": "kills", "unit": "npc_dota_hero_earthshaker"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower1_mid", "time": 2362, "target_source": "npc_dota_badguys_tower1_mid", "type": "kills", "unit": "npc_dota_hero_doom_bringer"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower2_bot", "time": 2755, "target_source": "npc_dota_badguys_tower2_bot", "type": "kills", "unit": "npc_dota_hero_juggernaut"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower3_bot", "time": 2777, "target_source": "npc_dota_badguys_tower3_bot", "type": "kills", "unit": "npc_dota_hero_juggernaut"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower2_mid", "time": 2777, "target_source": "npc_dota_badguys_tower2_mid", "type": "kills", "unit": "npc_dota_necronomicon_warrior_3"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_melee_rax_bot", "time": 2784, "target_source": "npc_dota_badguys_melee_rax_bot", "type": "kills", "unit": "npc_dota_hero_beastmaster"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower3_mid", "time": 3018, "target_source": "npc_dota_badguys_tower3_mid", "type": "kills", "unit": "npc_dota_necronomicon_archer_3"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_range_rax_mid", "time": 3687, "target_source": "npc_dota_badguys_range_rax_mid", "type": "kills", "unit": "npc_dota_hero_juggernaut"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_melee_rax_mid", "time": 3702, "target_source": "npc_dota_badguys_melee_rax_mid", "type": "kills", "unit": "npc_dota_hero_juggernaut (illusion)"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower4", "time": 3954, "target_source": "npc_dota_badguys_tower4", "type": "kills", "unit": "npc_dota_hero_juggernaut"}, {"target_illusion": false, "target_hero": false, "key": "npc_dota_badguys_tower4", "time": 3959, "target_source": "npc_dota_badguys_tower4", "type": "kills", "unit": "npc_dota_hero_alchemist"}];

    var ct = 0;
    radiant_building_kills.forEach(function(d){
        d.sum = ct;
        ct+=1;

        d.offset_time = d.time-789;
    });

    var ct2 = 0;
    dire_building_kills.forEach(function(d){
        d.sum = ct2;
        ct2+=1;

        d.offset_time = d.time-789;
    });

    var building_data = [
        {
            key:"Radiant",
            values: dire_building_kills
        },
        {
            key:"Dire",
            values: radiant_building_kills
        }

    ];

    var destination = "#building_stack";
    $(destination).empty();

    var svg = d3.select(destination)
    .append("svg")
    .attr("width", 455)
    .attr("height", 455);

    nv.addGraph(

        function(){
          var chart = nv.models.lineChart()
            .margin({
              left: 45,
              bottom: 45,
            })
            .x(function(d){
                return d.offset_time;
            })
            .y(function(d){
                return d.sum;
            })
            .showLegend(false)
            .interpolate("step-after")
            .forceX(-120, 3172);

          chart.xAxis.axisLabel("Minutes from Horn").tickFormat(
            function(d){
              return String(d).toHHMMSS();
            }
          );
          chart.yAxis.axisLabel("Total").axisLabelDistance(-18).tickFormat(
            function(d){
              if(d>1000000){return (d/1000000).toFixed(0) + "M";}
              else if(d>1000){return (d/1000).toFixed(0) + "K";}
              else { return d; }
            }
          );

          chart.tooltip.contentGenerator(bldg_tooltip);

          var chart_data = svg.datum(building_data);
          chart_data.transition().duration(500).call(chart);
          console.log(10)
          return chart;
    });

});
