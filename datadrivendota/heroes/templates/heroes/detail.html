{% extends "heroes/base.html" %}

{% block title %}{{ hero.name }}{% endblock %}

{% block page_title %}{% endblock %}

{% block content %}
  <div class="hero-lore">
    <h1>{{ hero.name }}</h1>
    <div class="infobox">
      {% if hero.mugshot %}
      <a class="thumbnail">
        <img class="hero" src='{{ hero.mugshot.url }}'>
      </a>
      {% endif %}
      <table>
      <thead>
        <tr>
          <td>Stat</td>
          <td>Level 1</td>
          <td>Level 16</td>
          <td>Level 25</td>
        </tr>
      </thead>
      <tbody>
        <tr> 
          <td>
            Strength: {{dossier.strength}} + {{dossier.strength_gain}}
          </td>          
          <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=strength&level=1">
          <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
          </a></td>
          <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=strength&level=16">
          <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
          </a></td>
          <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=strength&level=25">
          <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
          </a></td>
        </tr>
        <tr> 
          <td>
            Agility: {{dossier.agility}} + {{dossier.agility_gain}}
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=agility&level=1">
              <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=agility&level=16">
            <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=agility&level=25">
            <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
          </td>          
        </tr>
        <tr> 
          <td>
            Intelligence: {{dossier.intelligence}} + {{dossier.intelligence_gain}}
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=intelligence&level=1">
            <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=intelligence&level=16">
            <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
            <td><a href="{% url 'heroes:lineup' %}?heroes={{hero.name}}&stats=intelligence&level=25">
            <i class='glyphicon glyphicon-signal'  title='Click me!' style='display:inline-block'></i>
            </a></td>
          </td>          
        </tr>
      </tbody>
      </table>
      <div>Day/Night vision: {{dossier.day_vision}} / {{dossier.night_vision}}</div>
      <div>HP/Mana regen: {{dossier.hp_regen}} / {{dossier.mana_regen}}</div>
    </div>
    <p class="lore">
      {{ hero.lore }}
    </p>
  </div>
  <div class="hero-ability-list">
    {% for ability in abilities %}
      <a href="{% url 'heroes:ability_detail' ability_name=ability.machine_name %}" class="ability thumbnail">
        <img src="{{ ability.picture.url }}" alt="{{ ability.name }}" class="ability">
        <p class='overlayer'>{{ ability.name }}</p>
      </a>
    {% endfor %}
    <div class="clearfix"></div>
  </div>
  <div class="hero-chart-list">
    <span id='chart1'></span>
    <span id='chart2'></span>
    <span id='chart3'></span>
  </div>
{% endblock content %}

{% block extra_js %}
  <script type="text/javascript">
    $(function() {
      $.get(
        '{% url "heroes:hero_performance_api" %}',
        {
          hero: '{{ hero.name }}',
          x_var: 'duration',
          y_var: 'kills',
          group_var: 'skill',
        },
        function(json){
          $( "#chart1" ).html('<img id="theImg" src='+json['url']+' />');
        },
        'json'
      );

      $.get(
        '{% url "heroes:hero_performance_api" %}',
        {
          hero: '{{ hero.name }}',
          x_var: 'duration',
          y_var: 'K-D+.5*A',
          group_var: 'skill',
        },
        function(json){
          $( "#chart2" ).html('<img id="theImg" src='+json['url']+' />')
        },
        'json'
      );

      $.get(
        '{% url "heroes:hero_performance_api" %}',
        {
          hero: '{{ hero.name }}',
          x_var: 'duration',
          y_var: 'gold_total',
          group_var: 'skill',
        },
        function(json){
          $( "#chart3" ).html('<img id="theImg" src='+json['url']+' />')
        },
        'json'
      );
    });
  </script>
{% endblock extra_js  %}



